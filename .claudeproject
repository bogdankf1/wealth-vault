{
  "name": "Wealth Vault",
  "description": "Ultimate personal finance management platform with modular architecture, AI-powered insights, and tier-based monetization",
  "version": "0.1.0",
  "type": "monorepo",
  
  "overview": {
    "summary": "Wealth Vault is a comprehensive personal finance platform that gives users complete visibility and control over their financial life through 7 interconnected modules: Income Tracking, Expenses, Savings, Portfolio, Goals, Subscriptions, and Installments. Built with a modular, event-driven architecture where each module is a standalone piece of functionality that can be easily added, removed, or modified.",
    "key_principles": [
      "Modular architecture - each module is self-contained with its own models, API, UI, and business logic",
      "Event-driven communication - modules interact through pub/sub events, not direct dependencies",
      "Single source of truth - all configuration (tiers, features, defaults, actions) managed from admin panel",
      "Tier-based access control - features and limits dynamically enforced based on user subscription tier",
      "Mobile-first responsive design - optimized for mobile, tablet, and desktop with consistent UI/UX",
      "AI-powered automation - intelligent categorization, insights, and recommendations using Claude/OpenAI APIs",
      "Privacy-first - GDPR compliant, end-to-end encryption, user data ownership"
    ],
    "business_model": "Freemium SaaS with three tiers: Starter (free), Growth ($10/mo), Wealth ($20/mo)",
    "target_audience": "Technical professionals, investors, and financially-conscious individuals seeking comprehensive finance tracking"
  },

  "tech_stack": {
    "frontend": {
      "framework": "Next.js 14+ (App Router)",
      "language": "TypeScript",
      "styling": "Tailwind CSS + shadcn/ui components",
      "state_management": {
        "server_state": "RTK Query (Redux Toolkit Query) - handles all API calls, caching, data fetching",
        "client_state": "Zustand - lightweight global state for UI preferences (theme, sidebar, widget layouts)"
      },
      "auth": "NextAuth.js (Auth.js v5) with Google OAuth (Apple OAuth in Phase 2)",
      "charts": "Recharts (primary) + D3.js (advanced visualizations like Sankey diagrams)",
      "animations": "Framer Motion + React Swipeable (swipe gestures)",
      "forms": "React Hook Form + Zod validation",
      "file_handling": "React Dropzone, Papa Parse (CSV), XLSX/SheetJS (Excel), PDF.js",
      "utilities": "date-fns, lodash, clsx"
    },
    "backend": {
      "framework": "FastAPI (Python 3.11+)",
      "orm": "SQLAlchemy 2.0 (async)",
      "database": "PostgreSQL 15+",
      "migrations": "Alembic",
      "cache": "Redis",
      "background_jobs": "Celery + Redis",
      "file_storage": "Vercel Blob Storage",
      "ai": "Anthropic API (Claude) / OpenAI API",
      "external_apis": [
        "Exchange Rate API (currency conversion)",
        "Yahoo Finance / Alpha Vantage (stock prices)"
      ]
    },
    "payments": "Stripe (subscriptions, invoicing, customer portal)",
    "deployment": {
      "frontend": "Vercel",
      "backend": "Render or Railway",
      "database": "Railway PostgreSQL or Supabase",
      "redis": "Upstash (serverless Redis)",
      "monitoring": "Sentry (error tracking), PostHog/Plausible (analytics)"
    }
  },

  "architecture": {
    "monorepo_structure": "Simple folder-based monorepo with /frontend and /backend directories",
    "module_pattern": {
      "description": "Each module (Income, Expenses, Savings, etc.) is self-contained with well-defined interfaces",
      "structure": {
        "backend": "/backend/app/modules/{module_name}/ containing models, schemas, services, api routes",
        "frontend": "/frontend/app/(dashboard)/{module_name}/ containing pages, components, hooks",
        "config": "Each module has module.config.ts defining metadata, routes, dependencies, tier access"
      },
      "communication": "Event-bus (pub/sub) for inter-module communication - modules publish events, others subscribe",
      "data_sharing": "Modules expose public APIs for data access, avoiding tight coupling"
    },
    "permissions": {
      "roles": "USER (default) and ADMIN",
      "tiers": "starter (free), growth ($10/mo), wealth ($20/mo)",
      "enforcement": "Backend decorators (@require_feature, @admin_only) + frontend hooks (useFeatureAccess) + middleware"
    },
    "api_versioning": "All endpoints under /api/v1/ for future-proofing",
    "authentication_flow": "User → NextAuth.js → Google OAuth → JWT → FastAPI validates JWT → Returns data"
  },

  "core_modules": [
    {
      "name": "Income Tracking",
      "key": "income",
      "description": "Track multiple income sources (salary, freelance, dividends, etc.) with recurring/one-time support",
      "tier_access": "starter (3 sources max), growth (10 sources), wealth (unlimited)",
      "features": ["Income sources CRUD", "Income transactions", "Trend charts", "YTD statistics", "File upload support"]
    },
    {
      "name": "Monthly Expenses",
      "key": "expenses",
      "description": "Track expenses with AI-powered categorization from bank statement uploads",
      "tier_access": "All tiers (AI categorization: growth+)",
      "features": ["Transaction CRUD", "AI categorization", "Bank statement upload (CSV/Excel/PDF)", "Spending by category charts", "Monthly trends", "Budget tracking"]
    },
    {
      "name": "Total Savings",
      "key": "savings",
      "description": "Track savings across multiple accounts with multi-currency support",
      "tier_access": "starter (3 accounts), growth (10 accounts), wealth (unlimited)",
      "features": ["Account CRUD", "Balance history", "Multi-currency (growth+)", "Net worth timeline", "Currency conversion"]
    },
    {
      "name": "Portfolio",
      "key": "portfolio",
      "description": "Investment portfolio tracking with multi-portfolio support and real-time prices",
      "tier_access": "growth (20 positions, 15min prices), wealth (unlimited, real-time)",
      "features": ["Multi-portfolio support", "Position tracking", "Performance charts", "Asset allocation", "Stock price API integration"]
    },
    {
      "name": "Financial Goals",
      "key": "goals",
      "description": "Set and track financial goals with automatic progress updates from other modules",
      "tier_access": "growth+",
      "features": ["Goal CRUD", "Progress tracking", "Milestone celebrations", "Timeline visualization", "Goal recommendations"]
    },
    {
      "name": "Subscriptions",
      "key": "subscriptions",
      "description": "Track recurring subscriptions with renewal reminders and cost analysis",
      "tier_access": "starter (5 max), growth (20 max), wealth (unlimited)",
      "features": ["Subscription CRUD", "Renewal calendar", "Cost breakdown", "Auto-detection from statements", "Renewal reminders (Celery)"]
    },
    {
      "name": "Installments",
      "key": "installments",
      "description": "Track loans and payment plans with debt payoff timelines",
      "tier_access": "starter (2 max), growth (10 max), wealth (unlimited)",
      "features": ["Installment CRUD", "Payment tracking", "Payoff timeline", "Debt-free date projection", "Payment reminders"]
    }
  ],

  "design_system": {
    "theme": {
      "modes": ["light", "dark", "system"],
      "color_philosophy": "Professional and minimalistic with subtle shadows, rounded corners, ample whitespace",
      "primary_colors": {
        "light": {
          "background": "#FFFFFF / #F8F9FA",
          "text": "#1A1A1A / #6B7280",
          "accent": "#3B82F6",
          "success": "#10B981",
          "warning": "#F59E0B",
          "danger": "#EF4444"
        },
        "dark": {
          "background": "#0F172A / #1E293B",
          "text": "#F1F5F9 / #94A3B8",
          "accent": "#60A5FA",
          "success": "#34D399",
          "warning": "#FBBF24",
          "danger": "#F87171"
        }
      },
      "storage": "All colors stored in centralized theme config file for easy swapping"
    },
    "typography": "Inter (sans), JetBrains Mono (monospace)",
    "layout": {
      "structure": "Sidebar + Main Content Area with widget grid dashboard",
      "sidebar": "Collapsible on mobile (hamburger menu), always visible on desktop, icons + text",
      "widgets": "Card-based responsive grid (1 col mobile, 2 col tablet, 3-4 col desktop)",
      "panels": "Slide-in from right (desktop) or bottom (mobile) for forms/details"
    },
    "components": {
      "reusable": ["EmptyState", "LoadingState (skeleton)", "ErrorState", "SlideInPanel", "Modal", "Toast", "DataTable", "ChartWrapper", "SearchFilter", "MonthFilter", "ModuleHeader", "StatsCards", "DeleteConfirmDialog"],
      "consistency": "All modules follow same template: ModuleHeader (title + actions) → StatsCards (metrics) → Filters (SearchFilter + MonthFilter) → Data List/Table → DeleteConfirmDialog",
      "module_header": {
        "component": "ModuleHeader (components/ui/module-header.tsx)",
        "description": "Standard header for all module pages with title, description, and primary action button",
        "usage": "Displays module title, optional description, and action button (e.g., 'Add Income Source')",
        "props": {
          "title": "Module title (required)",
          "description": "Optional subtitle/description",
          "actionLabel": "Button text (default: 'Add New')",
          "actionIcon": "Lucide icon component (default: Plus)",
          "onAction": "Callback when button is clicked",
          "children": "Additional custom content (e.g., extra buttons)"
        },
        "consistency_requirement": "MUST use this component as the first element on all module pages"
      },
      "stats_cards": {
        "component": "StatsCards (components/ui/stats-cards.tsx)",
        "description": "Grid of statistics cards showing key metrics for a module",
        "usage": "Pass array of StatCard objects with title, value, description, icon",
        "props": {
          "stats": "Array of StatCard objects",
          "className": "Optional additional CSS classes"
        },
        "stat_card_interface": {
          "title": "Card title (e.g., 'Total Sources')",
          "value": "Main metric value (string or number)",
          "description": "Optional subtitle/context",
          "icon": "Lucide icon component",
          "iconClassName": "Optional icon styling"
        },
        "consistency_requirement": "Use for displaying 2-4 key metrics at the top of module pages"
      },
      "delete_confirm_dialog": {
        "component": "DeleteConfirmDialog (components/ui/delete-confirm-dialog.tsx)",
        "description": "Reusable confirmation dialog for all delete operations",
        "usage": "Displays confirmation modal before deleting items",
        "props": {
          "open": "Dialog visibility state",
          "onOpenChange": "Callback for state changes",
          "onConfirm": "Callback when delete is confirmed",
          "title": "Dialog title (default: 'Are you sure?')",
          "description": "Optional custom description",
          "isDeleting": "Loading state during deletion",
          "itemName": "Name of item being deleted (e.g., 'income source')"
        },
        "consistency_requirement": "MUST use instead of browser confirm() or custom alert dialogs for all delete operations"
      },
      "search_filter": {
        "component": "SearchFilter (components/ui/search-filter.tsx)",
        "description": "Reusable search bar with category dropdown for filtering module data by name and category",
        "usage": "Displays search input and category select. Filters items by name search query and selected category",
        "props": {
          "searchQuery": "Current search query string",
          "onSearchChange": "Callback for search input changes",
          "selectedCategory": "Currently selected category (or null)",
          "onCategoryChange": "Callback for category selection",
          "categories": "Array of available categories",
          "searchPlaceholder": "Search input placeholder (default: 'Search by name...')",
          "categoryPlaceholder": "Category dropdown placeholder (default: 'All Categories')"
        },
        "filtering_logic": {
          "search": "Case-insensitive name search using .toLowerCase().includes()",
          "category": "Exact match filtering by category field",
          "helper_function": "filterBySearchAndCategory() utility function handles all filtering logic"
        },
        "consistency_requirement": "MUST use this component across all modules for name search and category filtering"
      },
      "month_filter": {
        "component": "MonthFilter (components/ui/month-filter.tsx)",
        "description": "Reusable month/year filter for time-based modules (Income, Expenses, Subscriptions, Installments)",
        "usage": "Displays a month picker with Clear button. Filters items based on frequency type (one-time vs recurring)",
        "filtering_logic": {
          "one_time": "Checks if item's date field matches selected month/year",
          "recurring": "Checks if selected month overlaps with item's start_date/end_date range",
          "helper_function": "filterByMonth() utility function handles all filtering logic"
        },
        "consistency_requirement": "MUST use this component across all time-based modules to maintain consistent UX"
      },
      "combined_filtering": {
        "description": "SearchFilter and MonthFilter work together in a pipeline",
        "order": "Apply filters in sequence: MonthFilter → SearchFilter (search + category)",
        "example": "const monthFiltered = filterByMonth(items, month, ...); const final = filterBySearchAndCategory(monthFiltered, query, category, ...);"
      }
    },
    "interactions": {
      "swipe_gestures": "User-configurable swipe actions on mobile/tablet (left/right reveal actions like edit, delete, categorize)",
      "animations": "Framer Motion for smooth transitions (300ms), spring physics for natural feel",
      "toasts": "Top-right (desktop), top-center (mobile/tablet) for all actions",
      "pagination": "Hybrid approach - desktop: traditional pagination, mobile: load more button"
    }
  },

  "development_roadmap": {
    "phase_0": {
      "status": "COMPLETED ✓",
      "completed_date": "2025-10-06",
      "duration": "Week 1-2",
      "title": "Project Setup, Auth, Roles & Tiers",
      "goal": "Set up monorepo, authentication, and foundational permission system",
      "tasks": {
        "backend_setup": [
          "Initialize FastAPI project structure",
          "Configure PostgreSQL connection with SQLAlchemy",
          "Set up Alembic for database migrations",
          "Configure Redis connection",
          "Set up Celery for background tasks",
          "Create base models (User with role and tier fields, timestamps, soft delete)",
          "Implement error handling & logging",
          "Set up API versioning (/api/v1/)",
          "Configure CORS for Next.js frontend"
        ],
        "frontend_setup": [
          "Initialize Next.js 14 with App Router",
          "Configure TypeScript (strict mode) & ESLint",
          "Set up Tailwind CSS",
          "Install and configure shadcn/ui components",
          "Set up RTK Query store",
          "Set up Zustand for UI state (theme, sidebar)",
          "Configure theme system (light/dark/system) - store in centralized theme file",
          "Create base layout structure (sidebar, header)",
          "Set up Prettier and ESLint rules (no 'any' types)"
        ],
        "authentication": [
          "Set up NextAuth.js with Google OAuth",
          "Create backend OAuth endpoint (/api/v1/auth/oauth)",
          "Implement JWT validation in FastAPI",
          "Create protected route middleware (frontend - middleware.ts)",
          "Create auth dependency for protected routes (backend - get_current_user)",
          "Build login page UI",
          "Build user profile page (basic)",
          "Extend NextAuth session type with role & tier"
        ],
        "roles_and_tiers": [
          "Create users table with role (USER/ADMIN) and tier (starter/growth/wealth) fields",
          "Create tiers table (name, display_name, price_monthly, price_annual)",
          "Create features table (key, name, description, module)",
          "Create tier_features table (tier_id, feature_id, enabled, limit_value)",
          "Seed initial tiers (Starter $0, Growth $10, Wealth $20)",
          "Seed initial features (income_tracking, portfolio_tracking, ai_categorization, etc.)",
          "Seed tier-feature mappings (which features for which tiers)",
          "Create Alembic migration for all tables",
          "Create permission system (app/core/permissions.py)",
          "Create role-based decorators (@admin_only, @require_role)",
          "Create tier-based decorators (@require_feature)",
          "Create usage limit check functions (check_usage_limit)",
          "Add role/tier to JWT payload",
          "Create useFeatureAccess hook (frontend)",
          "Create FeatureGate component (frontend)",
          "Update sidebar with tier-aware navigation (show locks for premium features)",
          "Create upgrade flow UI placeholder",
          "Add admin panel route protection",
          "Test permission system (admin routes, tier restrictions, usage limits)"
        ],
        "infrastructure": [
          "Create .env.example files (frontend and backend)",
          "Set up GitHub repo with monorepo structure",
          "Configure CI/CD pipelines (GitHub Actions - basic)",
          "Deploy to Vercel (frontend - staging)",
          "Deploy to Render/Railway (backend - staging)",
          "Set up PostgreSQL on Railway/Supabase",
          "Set up Redis (Upstash)",
          "Configure environment variables for staging"
        ],
        "documentation": [
          "Create README.md with setup instructions",
          "Document environment variables",
          "Create architecture documentation (/docs/architecture.md)",
          "Document API conventions",
          "Document module pattern"
        ]
      },
      "deliverables": [
        "Working dev environment (Next.js + FastAPI + PostgreSQL + Redis)",
        "Google OAuth login flow with NextAuth.js",
        "Role-based access control (USER/ADMIN)",
        "Tier-based access control (starter/growth/wealth)",
        "Database schema with users, tiers, features, tier_features tables",
        "Permission decorators and hooks (@admin_only, @require_feature, useFeatureAccess)",
        "Deployed staging environments (Vercel + Render)",
        "Basic dashboard layout (empty with sidebar)"
      ]
    },
    
    "phase_1": {
      "status": "COMPLETED ✓",
      "completed_date": "2025-10-07",
      "duration": "Week 3-6",
      "title": "All 7 Base Modules (Income, Expenses, Savings, Subscriptions, Installments, Goals, Portfolio)",
      "goal": "Build all 7 core modules as standalone functionality with consistent UI/UX patterns",
      "completed_modules": [
        "✅ Income Tracking - Multiple income sources with recurring/one-time transactions",
        "✅ Expenses - Transaction tracking with categories and filtering",
        "✅ Savings - Multiple savings accounts with balance tracking",
        "✅ Subscriptions - Recurring subscription management with renewal tracking",
        "✅ Installments - Loan/payment plan tracking with payoff timelines",
        "✅ Goals - Financial goal setting with progress tracking",
        "✅ Portfolio - Investment portfolio tracking with performance metrics"
      ],
      "established_patterns": [
        "✅ Modular backend structure (models, schemas, service, router per module)",
        "✅ Consistent API patterns (CRUD + stats endpoints)",
        "✅ Tier-based access control with @require_feature decorators",
        "✅ Usage limits per tier (starter/growth/wealth)",
        "✅ Reusable UI components (ModuleHeader, StatsCards, SearchFilter, DeleteConfirmDialog)",
        "✅ RTK Query for API integration",
        "✅ Consistent form patterns (React Hook Form + Zod validation)",
        "✅ Empty, Loading, and Error states for all modules",
        "✅ Card-based layouts with responsive design"
      ],
      "tasks": {
        "module_system": [
          "Create module registry system (moduleRegistry.ts)",
          "Define module configuration structure (module.config.ts template)",
          "Create event bus for inter-module communication (pub/sub pattern)",
          "Set up module API pattern (how modules expose data)",
          "Create module loading/routing system",
          "Document module architecture pattern"
        ],
        "database_income": [
          "Design income tables schema (income_sources, income_transactions)",
          "Create SQLAlchemy models for Income (IncomeSource, IncomeTransaction)",
          "Create Alembic migration",
          "Add database indexes on frequently queried fields"
        ],
        "backend_income": [
          "Income sources CRUD endpoints (POST, GET, PUT, DELETE /api/v1/income/sources)",
          "Income transactions CRUD endpoints (/api/v1/income/transactions)",
          "Income statistics endpoint (total, by month, by source - /api/v1/income/stats)",
          "File upload endpoint for CSV/Excel parsing (/api/v1/income/upload)",
          "Pydantic schemas for validation (IncomeSourceCreate, IncomeSourceResponse, etc.)",
          "Add tier checks (@require_feature('income_tracking'))",
          "Add usage limit checks (max sources based on tier)",
          "Unit tests for income endpoints",
          "Create income module config"
        ],
        "frontend_income": [
          "Income page layout following module template (app/(dashboard)/income/page.tsx)",
          "Income sources list component with cards",
          "Add/Edit income source form in slide-in panel",
          "Income transactions list component",
          "Income summary widget for dashboard",
          "Income trend chart (Recharts - line/bar chart)",
          "Income by source pie chart",
          "File upload component with drag & drop",
          "RTK Query hooks for income API (useGetIncomeSourcesQuery, useAddIncomeSourceMutation, etc.)",
          "Empty state component for income module",
          "Loading state (skeleton) for income module",
          "Error state component",
          "Add tier checks and upgrade prompts when limits hit",
          "Create income module config (module.config.ts)"
        ],
        "reusable_components": [
          "EmptyState component (reusable across modules)",
          "LoadingState component with skeleton screens",
          "ErrorState component",
          "SlideInPanel component (right slide-in for forms)",
          "Modal/Dialog component",
          "Toast notification system (top-right desktop, top-center mobile)",
          "DataTable component (sortable, filterable, with pagination)",
          "Chart wrapper components"
        ],
        "testing": [
          "Backend API tests for income module (pytest)",
          "Frontend component tests for income module (Jest + React Testing Library)"
        ]
      },
      "deliverables": [
        "✅ All 7 core modules complete and functional",
        "✅ Reusable component library (ModuleHeader, StatsCards, SearchFilter, DeleteConfirmDialog, etc.)",
        "✅ Module architecture pattern established and documented",
        "✅ Consistent UI/UX across all modules",
        "✅ Tier-based access control working",
        "✅ Sample data added to all modules for testing"
      ],
      "notes": [
        "All modules built as standalone functionality",
        "No inter-module connections yet (planned for Phase 2)",
        "AI categorization not yet implemented (planned for Phase 2)",
        "Dashboard widgets not yet implemented (planned for Phase 2)"
      ]
    },

    "phase_2": {
      "status": "COMPLETED ✓",
      "completed_date": "2025-10-08",
      "duration": "Week 7-9",
      "title": "Dashboard, Inter-Module Integration & Data Flows",
      "goal": "Create overview dashboard and connect modules through data aggregation and cross-module features",
      "completed_features": [
        "✅ Overview Dashboard - Comprehensive financial dashboard with responsive widget grid",
        "✅ Net Worth Widget - Aggregates Portfolio + Savings - Installments with detailed breakdown",
        "✅ Financial Health Score - 0-100 score based on 5 components (emergency fund, debt-to-income, savings rate, investment diversity, goals progress)",
        "✅ Cash Flow Widgets - Income, Expenses, Subscriptions, and Net Cash Flow with savings rate",
        "✅ Recent Activity Feed - Last 10 transactions from all modules with type indicators",
        "✅ Quick Actions - 5 action buttons (Add Income, Add Expense, Add Subscription, Add Installment, Create Goal) with integrated forms",
        "✅ Financial Alerts & Notifications - 8 types of smart alerts (high spending, low emergency fund, goals near completion, etc.)",
        "✅ Info Tooltips - Calculation explanations for all computed metrics",
        "✅ Auto-refresh - Dashboard automatically updates when data changes in any module",
        "✅ Responsive Design - Consistent padding and layouts across all pages"
      ],
      "tasks": {
        "dashboard": [
          "✅ Create Overview dashboard page (app/(dashboard)/page.tsx)",
          "✅ Widget grid layout system (responsive: 1/2/3-4 columns)",
          "✅ Net Worth card widget (total assets - liabilities, calculate from Portfolio + Savings - Installments)",
          "✅ Monthly Cash Flow widget (Income - Expenses - Subscriptions = net)",
          "✅ Recent Transactions widget (last 10 transactions from all modules)",
          "✅ Quick Actions widget (Add Income, Add Expense, Add Subscription, Add Installment, Create Goal)",
          "✅ Financial Alerts widget (smart notifications and insights)",
          "✅ Widget loading states and empty states",
          "⏸ Goals Progress widget (top 3 goals with progress bars) - Deferred to Phase 3",
          "⏸ Upcoming Payments widget (subscriptions + installments due in next 7 days) - Deferred to Phase 3",
          "⏸ Portfolio Performance widget (total value, return %, best/worst performers) - Deferred to Phase 3"
        ],
        "cross_module_features": [
          "✅ Net Worth calculation (aggregate from Portfolio + Savings - Installments)",
          "✅ Cash Flow calculation (Income - Expenses - Subscriptions)",
          "✅ Debt-to-Income ratio calculation",
          "✅ Savings Rate calculation (% of income saved)",
          "✅ Financial Health Score (0-100 aggregate metric from all modules)",
          "✅ Emergency Fund Score (savings vs 3 months expenses)",
          "✅ Investment Diversity Score (unique asset types)",
          "✅ Goals Progress Score (average completion percentage)"
        ],
        "data_aggregation_endpoints": [
          "✅ Create /api/v1/dashboard/overview endpoint (aggregate stats from all modules)",
          "✅ Create /api/v1/dashboard/net-worth endpoint (Portfolio + Savings - Installments)",
          "✅ Create /api/v1/dashboard/cash-flow endpoint (Income - Expenses - Subscriptions by month)",
          "✅ Create /api/v1/dashboard/financial-health endpoint (calculate health score 0-100 with 5 components)",
          "✅ Create /api/v1/dashboard/recent-activity endpoint (last 10 transactions from all modules)",
          "✅ Create /api/v1/dashboard/financial-alerts endpoint (smart notifications based on financial data)",
          "✅ Optimize queries with proper joins and aggregations",
          "⏸ Create /api/v1/dashboard/upcoming-payments endpoint (subscriptions + installments due soon) - Placeholder added, calculation logic deferred",
          "⏸ Add caching for dashboard data (Redis) - Deferred to performance optimization phase"
        ],
        "frontend_enhancements": [
          "✅ Created Subscription Form component (with auto-detection categories and billing frequencies)",
          "✅ Created Installment Form component (with auto-calculation and comprehensive loan categories)",
          "✅ Integrated forms with Quick Actions dialogs",
          "✅ Added RTK Query cache invalidation across all modules (Dashboard tag)",
          "✅ Info icon tooltips explaining all calculations",
          "✅ Consistent padding and spacing (container mx-auto space-y-6 p-6)",
          "✅ Color-coded alerts (success/green, warning/yellow, danger/red, info/blue)",
          "✅ Actionable alert links to relevant module pages"
        ],
        "navigation_improvements": [
          "⏸ Add sidebar navigation highlighting current module - Deferred to Phase 7",
          "⏸ Add breadcrumbs for navigation clarity - Deferred to Phase 7",
          "⏸ Create global search (search across all modules - Cmd+K shortcut) - Deferred to Phase 7",
          "⏸ Add module switcher dropdown in header - Deferred to Phase 7"
        ],
        "sidebar_enhancements": [
          "⏸ Add quick stats in sidebar (net worth, monthly cash flow) - Deferred to Phase 7",
          "⏸ Add notifications indicator (upcoming payments, goals reached) - Deferred to Phase 7",
          "⏸ Add recent activity preview (last 3 transactions) - Deferred to Phase 7",
          "⏸ Make sidebar collapsible on desktop - Deferred to Phase 7"
        ]
      },
      "deliverables": [
        "✅ Functional overview dashboard with key financial widgets",
        "✅ Cross-module calculations (Net Worth, Cash Flow, Financial Health Score)",
        "✅ Dashboard API endpoints for data aggregation (6 endpoints total)",
        "✅ Recent activity feed from all modules",
        "✅ Financial alerts system with 8 smart notification types",
        "✅ Quick Actions with 5 integrated form dialogs",
        "✅ Auto-refresh on data changes (RTK Query cache invalidation)",
        "✅ Info tooltips for all calculated metrics",
        "✅ Responsive and consistent design"
      ],
      "technical_highlights": [
        "Backend: SQLAlchemy aggregations across 7 module tables",
        "Frontend: RTK Query with automatic cache invalidation ('Dashboard' tag)",
        "Financial Health: 5-component scoring system (20 points each)",
        "Alerts: Rule-based notification system with actionable insights",
        "Forms: Reusable subscription and installment forms with validation",
        "UX: Info tooltips using Radix UI with calculation explanations"
      ],
      "deferred_to_later_phases": [
        "Upcoming Payments calculation (next payment date logic for subscriptions/installments)",
        "Redis caching for dashboard performance",
        "Enhanced navigation (breadcrumbs, global search, sidebar stats)",
        "Portfolio/Goals widgets on dashboard (data aggregation endpoints exist, widgets deferred)"
      ]
    },
    
    "phase_3": {
      "status": "COMPLETED ✓",
      "completed_date": "2025-10-09",
      "duration": "Week 10-12",
      "title": "AI Features & File Upload",
      "goal": "Add AI-powered features and file upload/parsing for automated data entry",
      "completed_features": [
        "✅ CSV File Upload - Drag & drop interface with file validation",
        "✅ Statement Parsing - Automatic column detection and date parsing (supports Ukrainian Monobank format)",
        "✅ AI Categorization - GPT-4o-mini integration with smart category suggestions",
        "✅ Batch Processing - Efficient categorization of multiple transactions",
        "✅ Interactive Category Editing - Dropdown selects for quick category corrections",
        "✅ Import to Expenses - One-click import of parsed and categorized transactions",
        "✅ Shared Category System - Centralized expense categories across frontend and backend",
        "✅ Data Sorting - Most recent transactions first across all modules",
        "✅ Environment Loading - Automatic .env file loading with dotenv"
      ],
      "tasks": {
        "database": [
          "✅ AI-related tables (uploaded_files, ai_insights, categorization_corrections)",
          "✅ Indexes for AI and file queries",
          "⏸ Portfolios tables schema & migration (portfolios, portfolio_positions) - Deferred",
          "⏸ Goals tables schema & migration (goals, goal_milestones) - Deferred",
          "⏸ Add indexes for portfolio and goal queries - Deferred"
        ],
        "backend_portfolio": [
          "Portfolio CRUD endpoints (/api/v1/portfolio/portfolios)",
          "Portfolio positions CRUD endpoints (/api/v1/portfolio/positions)",
          "Multi-portfolio support (user can have multiple portfolios)",
          "Stock price API integration (Yahoo Finance / Alpha Vantage)",
          "Real-time price updates endpoint (tier-based: 15min delay for growth, real-time for wealth)",
          "Portfolio performance calculations (gains/losses, ROI, time-weighted returns)",
          "Asset allocation calculations (% stocks, bonds, crypto, etc.)",
          "Portfolio statistics endpoint (/api/v1/portfolio/stats)",
          "Portfolio comparison endpoint (compare multiple portfolios)",
          "Pydantic schemas",
          "Tier checks (portfolio_tracking for growth+, position limits)",
          "Tests"
        ],
        "backend_goals": [
          "Goals CRUD endpoints (/api/v1/goals)",
          "Goal types support (savings, debt payoff, investment, net worth)",
          "Progress calculation logic (auto-update from other modules via events)",
          "Milestone tracking",
          "Goal recommendations endpoint (AI-powered suggestions)",
          "Goal statistics endpoint",
          "Pydantic schemas",
          "Tier checks (goals feature for growth+)",
          "Tests"
        ],
        "frontend_portfolio": [
          "Portfolios page with multi-portfolio view",
          "Portfolio selector dropdown",
          "Add/Edit portfolio form (slide-in panel)",
          "Add/Edit position form (slide-in panel with ticker search)",
          "Portfolio performance chart (line chart showing value over time)",
          "Asset allocation donut chart",
          "Portfolio comparison view (side-by-side)",
          "Individual portfolio detail view (expandable cards)",
          "Position list with current prices and gains/losses",
          "Portfolio summary widget for dashboard",
          "Real-time price updates (polling based on tier)",
          "RTK Query hooks",
          "Empty/Loading/Error states",
          "Feature gate (growth+ only)",
          "Position limit enforcement with upgrade prompt"
        ],
        "frontend_goals": [
          "Goals page with goal cards",
          "Add/Edit goal form (slide-in panel)",
          "Goal type selector (savings, debt, investment, net worth)",
          "Goal progress bars with % complete",
          "Goal timeline visualization (chart showing progress over time)",
          "Goal status indicators (on track / ahead / behind with colors)",
          "Monthly progress summary (auto-generated on 1st of month)",
          "Goals widget for dashboard (top 3 goals with progress)",
          "Milestone celebrations (confetti animation when goal reached)",
          "RTK Query hooks",
          "Empty/Loading/Error states",
          "Feature gate (growth+ only)"
        ],
        "inter_module_integration": [
          "Goals automatically track progress from Income/Expenses/Savings/Portfolio modules",
          "Event bus connections: income:added → update savings goals",
          "Event bus connections: expense:added → update spending goals",
          "Event bus connections: portfolio:updated → update investment goals",
          "Dashboard aggregates data from all modules (net worth = savings + portfolio)",
          "Test event flow between modules"
        ]
      },
      "deliverables": [
        "Portfolio module with multi-portfolio support",
        "Goals module with automatic progress tracking",
        "Modules communicate via event bus",
        "Dashboard shows aggregated insights from all modules",
        "Stock price integration working"
      ]
    },
    
    "phase_4": {
      "status": "COMPLETED ✓",
      "completed_date": "2025-10-11",
      "duration": "Week 13-14",
      "title": "Analytics & Insights Dashboard",
      "goal": "Add interactive data visualizations and analytics to dashboard for financial insights",
      "completed_features": [
        "✅ Time Range Filter - Preset periods and custom date picker",
        "✅ Income vs Expenses Chart - Monthly cash flow comparison with summary stats",
        "✅ Expense by Category Chart - Pie/donut chart with percentage breakdown",
        "✅ Monthly Spending Chart - Bar chart with average reference and insights",
        "✅ Net Worth Trend Chart - Wealth progression based on cumulative cash flow",
        "✅ Proper One-Time Income Handling - Shows income spikes in correct months",
        "✅ Smart Statistics - Excludes zero-spending months from averages",
        "✅ String-to-Number Conversion - Transforms API Decimal strings to numbers",
        "✅ Responsive Chart Layouts - 2-column grid on desktop, stacked on mobile"
      ],
      "tasks": {
        "frontend_components": [
          "✅ TimeRangeFilter component with presets and custom range picker",
          "✅ IncomeVsExpensesChart component with area/line visualization",
          "✅ ExpenseByCategoryChart component with pie/donut chart",
          "✅ MonthlySpendingChart component with bar chart and insights",
          "✅ NetWorthTrendChart component with wealth progression"
        ],
        "backend_analytics": [
          "✅ Income vs Expenses endpoint with date filtering (one-time + recurring)",
          "✅ Expense by Category endpoint with percentage calculations",
          "✅ Monthly Spending endpoint with statistics",
          "✅ Net Worth Trend endpoint with cumulative cash flow",
          "✅ Proper timezone handling (strip timezone info)",
          "✅ Monthly aggregation using dateutil.relativedelta",
          "✅ Removed incorrect deleted_at checks for Expense model"
        ],
        "frontend_integration": [
          "✅ Integrated analytics section into dashboard page",
          "✅ Added RTK Query hooks with transformResponse",
          "✅ String-to-number conversion for API Decimal values",
          "✅ Time range state management with useMemo",
          "✅ Automatic chart updates on time range change",
          "✅ Fixed read-only array mutations",
          "✅ Added missing Recharts Cell import"
        ],
        "data_quality": [
          "✅ Exclude zero-spending months from statistics",
          "✅ Proper one-time income date matching",
          "✅ Recurring income date range validation",
          "✅ Cumulative cash flow for net worth progression",
          "✅ Baseline assets + cash flow for accurate net worth"
        ]
      },
      "deliverables": [
        "✅ 5 chart widgets integrated into dashboard",
        "✅ 4 analytics API endpoints working correctly",
        "✅ Time range filtering with preset and custom options",
        "✅ Proper handling of one-time and recurring income",
        "✅ Smart statistics excluding zero values",
        "✅ Accurate net worth progression based on cash flow",
        "✅ All charts responsive and accessible",
        "✅ Empty states for charts with no data"
      ],
      "technical_highlights": [
        "Backend: Monthly aggregation with relativedelta, timezone-naive datetime handling",
        "Frontend: RTK Query with transformResponse for type conversion",
        "Charts: Recharts with custom tooltips and legends",
        "Income Calculation: Separate queries for one-time and recurring sources",
        "Net Worth: Baseline assets + cumulative (income - expenses)",
        "Statistics: Non-zero filtering for meaningful averages"
      ]
    },

    "phase_5": {
      "status": "COMPLETED ✓",
      "completed_date": "2025-10-11",
      "duration": "Week 15-16",
      "title": "Budget Management Module",
      "goal": "Add budget tracking with spending limits, progress monitoring, and alerts",
      "completed_features": [
        "✅ Budget CRUD - Create, read, update, delete budgets",
        "✅ Multi-Category Support - Budget by expense category (Housing, Food, etc.)",
        "✅ Time Periods - Monthly, quarterly, and yearly budget cycles",
        "✅ Progress Tracking - Real-time spent vs budgeted with percentage calculations",
        "✅ Three-State System - Green (under 80%), Amber (80-100%), Red (overspent)",
        "✅ Alert Thresholds - Configurable alerts (default 80% of budget used)",
        "✅ Rollover Support - Optional carry-over of unused budget to next period",
        "✅ Budget Overview Widget - Dashboard widget showing all active budgets aggregated",
        "✅ Top Categories Display - Shows top 3 spending categories with progress bars",
        "✅ Smart Alerts - Identifies budgets near limit or overspent",
        "✅ Quick Action Integration - Add Budget button in dashboard Quick Actions",
        "✅ Info Tooltips - Calculation explanations for budget metrics",
        "✅ Responsive Design - Works on mobile, tablet, and desktop"
      ],
      "tasks": {
        "database": [
          "✅ Budgets table schema with all required fields (name, category, amount, period, etc.)",
          "✅ Created Alembic migration for budgets table",
          "✅ Added indexes for user_id and category queries"
        ],
        "backend_budgets": [
          "✅ Budget CRUD endpoints (/api/v1/budgets)",
          "✅ Budget overview endpoint with aggregated stats (/api/v1/budgets/overview)",
          "✅ Individual budget progress endpoint (/api/v1/budgets/{id})",
          "✅ Real-time spending calculation from expenses",
          "✅ Percentage used and remaining calculations",
          "✅ Alert detection (near limit, overspent)",
          "✅ Support for three time periods (monthly, quarterly, yearly)",
          "✅ Pydantic schemas for validation",
          "✅ Tier checks (budget limits based on tier)",
          "✅ Multi-currency support"
        ],
        "frontend_budgets": [
          "✅ Budgets page with list view (/dashboard/budgets)",
          "✅ Budget form component with validation",
          "✅ Time range filter (preset periods and custom dates)",
          "✅ Budget cards showing progress bars and status",
          "✅ Three-state color coding (green/amber/red)",
          "✅ Budget Overview Widget for dashboard",
          "✅ Add Budget quick action in dashboard",
          "✅ RTK Query integration (budgetsApi)",
          "✅ Info tooltips for metrics",
          "✅ Empty/Loading/Error states",
          "✅ Delete confirmation dialog"
        ],
        "ui_improvements": [
          "✅ Standardized widget title and subtitle styling",
          "✅ Added info tooltips to all dashboard widgets",
          "✅ Clarification text for Budget Overview period",
          "✅ Consistent padding across all pages",
          "✅ Responsive grid layouts"
        ],
        "code_quality": [
          "✅ Fixed TypeScript errors in budget-form.tsx",
          "✅ Fixed TypeScript errors in budgetsApi.ts",
          "✅ Removed unused imports",
          "✅ All linting and formatting checks passing"
        ],
        "backend_subscriptions": [
          "Subscriptions CRUD endpoints (/api/v1/subscriptions)",
          "Billing cycle tracking logic (monthly, annual, custom)",
          "Upcoming renewals calculation endpoint (/api/v1/subscriptions/upcoming)",
          "Auto-detection from bank statements using AI",
          "Subscription cost analytics (/api/v1/subscriptions/stats)",
          "Renewal reminder system (Celery scheduled task - check daily)",
          "Email notification for upcoming renewals",
          "Pydantic schemas",
          "Tier checks (subscription limits: 5 for starter, 20 for growth, unlimited for wealth)",
          "Tests"
        ],
        "backend_installments": [
          "Installments CRUD endpoints (/api/v1/installments)",
          "Payment tracking (record each payment)",
          "Debt payoff calculation logic (remaining balance, months left)",
          "Payoff timeline generation",
          "Interest calculation (if applicable)",
          "Payment reminder system (Celery scheduled task)",
          "Email notification for upcoming payments",
          "Debt statistics endpoint (/api/v1/installments/stats)",
          "Pydantic schemas",
          "Tier checks (installment limits)",
          "Tests"
        ],
        "frontend_subscriptions": [
          "Subscriptions page",
          "Add/Edit subscription form (slide-in panel)",
          "Billing cycle selector (monthly/annual/custom)",
          "Upcoming renewals calendar view",
          "Subscription cost breakdown (pie chart by category)",
          "Category grouping (Entertainment, Productivity, Health, etc.)",
          "Renewal alerts (toast notifications 3 days before)",
          "Subscription summary widget for dashboard (next 7 days)",
          "Auto-detection results review (from bank statements)",
          "Usage tracking (gym check-ins, streaming watch time - optional)",
          "RTK Query hooks",
          "Empty/Loading/Error states",
          "Tier limits enforcement"
        ],
        "frontend_installments": [
          "Installments page",
          "Add/Edit installment form (slide-in panel)",
          "Debt payoff timeline chart (stacked area showing multiple loans)",
          "Payment schedule visualization",
          "Next payment alerts (toast notifications)",
          "Installment summary widget for dashboard",
          "Total debt overview card",
          "Debt-free date projection",
          "Progress bars for each loan (% paid off)",
          "RTK Query hooks",
          "Empty/Loading/Error states",
          "Tier limits enforcement"
        ]
      },
      "deliverables": [
        "✅ Budget module complete with full CRUD",
        "✅ Budget Overview Widget on dashboard",
        "✅ Real-time spending tracking against budgets",
        "✅ Three-state progress visualization",
        "✅ Alert system for budget limits",
        "✅ Multi-currency and multi-period support",
        "✅ Dashboard integration with Quick Actions",
        "✅ Info tooltips for all widgets",
        "✅ All TypeScript and linting errors resolved"
      ],
      "technical_highlights": [
        "Backend: SQLAlchemy aggregations for spending calculations",
        "Frontend: RTK Query with Budget tag for cache invalidation",
        "Budget Progress: Real-time calculation from Expense transactions",
        "Three-State System: Green (<80%), Amber (80-100%), Red (>100%)",
        "Time Periods: Support for monthly, quarterly, and yearly cycles",
        "Rollover: Optional carry-over of unused budget amounts"
      ]
    },
    
    "phase_6": {
      "status": "COMPLETED ✓",
      "completed_date": "2025-10-12",
      "duration": "Week 17-18",
      "title": "Stripe Integration & Settings Page",
      "goal": "Implement Stripe payment integration and subscription management UI",
      "completed_features": [
        "✅ Stripe Integration - Full checkout, webhooks, and subscription management",
        "✅ Database Schema - Subscriptions and payment history tables with Alembic migrations",
        "✅ Stripe Webhooks - checkout.session.completed, customer.subscription.* events",
        "✅ Pricing Page - Public pricing page with tier comparison and Stripe Checkout integration",
        "✅ Settings Page - Tab-based interface with Account and Subscription tabs",
        "✅ Subscription Management - View current plan, billing details, payment history, cancel subscription",
        "✅ Billing API - Complete backend billing module with CRUD endpoints",
        "✅ AI Feature Gating - AI Insights widget hidden for non-Wealth tier users",
        "✅ Clean Logging - Replaced debug prints with proper logger.exception()",
        "✅ Nullable Period Dates - Fixed Pydantic validation for subscriptions without billing cycles",
        "✅ Simplified UI - Removed redundant sections, consistent design with other modules"
      ],
      "tasks": {
        "database": [
          "✅ User subscriptions table (user_id, stripe_subscription_id, status, current_period_start, current_period_end)",
          "✅ Payment history table (user_id, stripe_invoice_id, amount, currency, status, paid_at)",
          "✅ Updated users table with stripe_customer_id",
          "✅ Made current_period_start and current_period_end nullable (for non-paid tiers)",
          "✅ Created Alembic migrations for billing tables"
        ],
        "backend_tier_system": [
          "✅ Tier validation with permission decorators (@require_feature)",
          "✅ Tier info included in JWT and current user responses",
          "✅ Subscription status synced from Stripe webhooks",
          "⏸ Tier configuration endpoints for admin - Deferred to Phase 7",
          "⏸ Feature management endpoints for admin - Deferred to Phase 7",
          "⏸ Usage tracking system - Deferred to Phase 7"
        ],
        "stripe_integration": [
          "✅ Stripe account set up (test mode)",
          "✅ Stripe products & prices created (Starter $0, Growth $10/mo, Wealth $20/mo)",
          "✅ Stripe Checkout session endpoint (/api/v1/billing/create-checkout-session)",
          "✅ Webhook endpoint for subscription events (/api/v1/billing/webhook)",
          "✅ Handle webhook events: checkout.session.completed, customer.subscription.updated, customer.subscription.deleted",
          "✅ Subscription management endpoints (GET status, POST cancel, POST update)",
          "✅ Payment history endpoint (GET /api/v1/billing/payment-history)",
          "✅ Fixed webhook handling with proper logging",
          "✅ Tested webhooks with Stripe CLI and test events",
          "⏸ Customer portal integration - Removed (requires portal configuration)",
          "⏸ Annual pricing - Deferred to Phase 7",
          "⏸ Payment method management endpoints - Deferred to Phase 7"
        ],
        "frontend_subscription_management": [
          "✅ Pricing page (public - /dashboard/pricing) with tier comparison",
          "✅ Stripe Checkout integration with redirect flow",
          "✅ Settings page (/dashboard/settings) with tab interface",
          "✅ Account tab - User profile info (name, email, member since)",
          "✅ Subscription tab - Current plan, billing details, payment history, cancel flow",
          "✅ Current plan display for all users (shows tier regardless of subscription status)",
          "✅ Billing details conditional display (only if subscription has period dates)",
          "✅ Payment history with status indicators (succeeded, failed, pending)",
          "✅ Cancel subscription flow with AlertDialog confirmation",
          "✅ View Pricing Plans button linking to pricing page",
          "✅ Simplified action buttons (removed Manage Billing, removed redundant sections)",
          "✅ Updated sidebar navigation (changed Subscription to Settings)",
          "⏸ Reactivate subscription option - Deferred",
          "⏸ Usage stats display - Deferred to Phase 7"
        ],
        "feature_gating": [
          "✅ AI Insights widget hidden for non-Wealth tier users (frontend/app/dashboard/page.tsx)",
          "✅ Tier checks present in navigation sidebar (tier property on nav items)",
          "⏸ Display upgrade prompts when hitting limits - Deferred to Phase 7",
          "⏸ Lock premium features with lock icon - Deferred to Phase 7",
          "⏸ Test all tier restrictions across modules - Deferred to Phase 7"
        ],
        "code_quality": [
          "✅ Removed all debug/console.log statements from backend",
          "✅ Added proper logging with logger.exception() for webhook errors",
          "✅ Fixed Pydantic schema validation errors (Optional period dates)",
          "✅ Fixed TypeScript type errors in frontend components",
          "✅ All lint and type checks passing",
          "✅ Consistent UI/UX padding and spacing across Settings page"
        ]
      },
      "deliverables": [
        "✅ Stripe integration complete and working",
        "✅ Database schema for subscriptions and payments",
        "✅ Webhook handling for subscription lifecycle events",
        "✅ Public pricing page with Stripe Checkout",
        "✅ Settings page with Account and Subscription tabs",
        "✅ Subscription management UI (view, cancel, payment history)",
        "✅ AI feature gating (Wealth tier only)",
        "✅ Clean, consistent UI matching other modules",
        "✅ All debug statements removed and proper logging in place"
      ],
      "technical_highlights": [
        "Backend: FastAPI billing module with Stripe SDK integration",
        "Webhooks: Signature verification and event handling with proper error logging",
        "Database: Nullable period dates to support users without active billing cycles",
        "Frontend: RTK Query billingApi with mutations and queries",
        "Settings: Tab-based UI with shadcn/ui Tabs component",
        "Feature Gating: Conditional rendering based on currentUser.tier.name",
        "UI/UX: Consistent design patterns matching Expenses and other modules"
      ],
      "deferred_to_later_phases": [
        "Stripe Customer Portal integration (requires portal configuration in Stripe dashboard)",
        "Admin panel for tier/feature management",
        "Usage tracking and limit enforcement",
        "Upgrade prompts and lock icons for premium features",
        "Annual pricing options",
        "Payment method management UI",
        "Comprehensive tier restriction testing across all modules"
      ]
    },

    "phase_7": {
      "status": "COMPLETED ✓",
      "completed_date": "2025-10-12",
      "duration": "Week 19-20",
      "title": "Admin Panel & Configuration",
      "goal": "Build comprehensive admin panel with dynamic configuration system",
      "completed_features": [
        "✅ Admin Backend - Complete admin API with users, tiers, analytics, and configuration endpoints",
        "✅ Admin Dashboard - Platform overview with 6 KPIs (users, subscriptions, revenue, churn)",
        "✅ User Management - List, search, filter, edit users with role/tier assignments",
        "✅ Tier Management - Full tier CRUD with feature assignment and comparison table",
        "✅ Analytics Page - Detailed metrics with charts and insights",
        "✅ UI/UX Standardization - All admin pages use ModuleHeader, LoadingCards, Info tooltips",
        "✅ Professional Design - Changed from red to indigo theme for admin panel",
        "✅ Code Quality - All TypeScript errors fixed, 0 ESLint errors, proper typing throughout",
        "✅ Configuration Seeding - Sample configurations for feature flags, thresholds, UI settings"
      ],
      "tasks": {
        "backend_admin_endpoints": [
          "✅ Admin authentication & authorization (@admin_only decorator)",
          "✅ User management endpoints (/api/v1/admin/users - list, search, filter by role/tier)",
          "✅ User detail endpoint (/api/v1/admin/users/{id})",
          "✅ Update user endpoint (tier override, role change)",
          "✅ Suspend/unsuspend user endpoints",
          "✅ Platform stats endpoint (total users, active subs, MRR, ARR, churn)",
          "✅ Analytics endpoints (user acquisition, engagement metrics)",
          "✅ Tier management endpoints (list, create, update tiers)",
          "✅ Feature management endpoints (list all features, tier features)",
          "✅ Feature assignment endpoint (enable/disable features per tier)",
          "✅ Configuration endpoints (list, create, update, delete configs)",
          "✅ Email template endpoints (list, create, update, delete templates)",
          "⏸ User impersonation endpoint - Removed as requested",
          "⏸ Action configurator endpoints (swipe gestures) - Deferred to Phase 8"
        ],
        "frontend_admin_dashboard": [
          "✅ Admin panel route (/admin) with role-based protection",
          "✅ Admin dashboard overview page with 6 KPI cards",
          "✅ Total users, active users, new users (today/week/month)",
          "✅ Subscription stats (total, active, MRR, ARR, churn rate)",
          "✅ User acquisition chart (7-day signups)",
          "✅ ModuleHeader component for consistent layout",
          "✅ Info tooltips explaining all metrics",
          "✅ Loading states with LoadingCards",
          "✅ Error handling with ApiErrorState",
          "⏸ Revenue chart (MRR/ARR breakdown) - Deferred",
          "⏸ Engagement metrics (DAU/MAU charts) - Deferred"
        ],
        "frontend_user_management": [
          "✅ User management page (/admin/users)",
          "✅ User list table with search (email, name)",
          "✅ User list with filters (role: USER/ADMIN, tier: starter/growth/wealth)",
          "✅ Pagination (20 users per page)",
          "✅ Edit user dialog (change role, change tier)",
          "✅ Suspend/unsuspend user actions with confirmation",
          "✅ User badges (role, tier, status)",
          "✅ Created date display",
          "✅ LoadingTable and empty states",
          "⏸ User impersonation - Removed as requested",
          "⏸ User detail view with activity timeline - Deferred",
          "⏸ Usage stats display - Deferred"
        ],
        "frontend_tier_management": [
          "✅ Tier management page (/admin/tiers)",
          "✅ Tier cards showing pricing and details",
          "✅ Edit tier dialog (display name, description, pricing, active status)",
          "✅ Feature assignment dialog (enable/disable features per tier)",
          "✅ Feature Comparison Table (all features × all tiers matrix)",
          "✅ Visual feature preview with checkmarks",
          "✅ Tier badge colors (gray/green/purple)",
          "✅ Fixed layout consistency (consistent card heights)",
          "✅ LoadingCards and empty states",
          "⏸ Set usage limits per tier UI - Deferred",
          "⏸ Global feature enable/disable toggle - Deferred"
        ],
        "frontend_configuration": [
          "✅ Configuration endpoints created (backend)",
          "✅ Email template endpoints created (backend)",
          "✅ Sample configurations seeded (5 configs)",
          "⏸ Configuration page UI - Removed (unclear use case, overlaps with tier management)",
          "⏸ Default widgets selector - Deferred to Phase 8",
          "⏸ Categories editor - Deferred to Phase 8",
          "⏸ API keys configuration - Deferred",
          "⏸ Maintenance mode toggle - Deferred"
        ],
        "frontend_action_configurator": [
          "Action configurator page (/admin/actions)",
          "Swipe actions configuration per module",
          "Available actions list (edit, delete, categorize, etc.)",
          "Default action assignments (swipe left/right)",
          "Preview of swipe actions"
        ],
        "frontend_analytics": [
          "Analytics page (/admin/analytics)",
          "User acquisition charts (daily/weekly/monthly signups)",
          "Engagement metrics dashboard (sessions, retention cohorts)",
          "Revenue analytics (MRR breakdown by tier, LTV)",
          "Feature usage stats (which modules are most used)",
          "Churn analysis (when/why users cancel)"
        ],
        "configuration_system": [
          "Dynamic widget configuration (stored in DB)",
          "Default category management (CRUD for categories)",
          "Swipe gesture configuration (stored in DB, applied to users)",
          "Email template system (store templates in DB)"
        ]
      },
      "deliverables": [
        "Full admin panel operational",
        "User management with impersonation",
        "Dynamic configuration system (widgets, categories, actions)"
      ],
      "deferred_to_phase_2": [
        "Analytics integration (PostHog/Plausible)",
        "User event tracking and conversion funnels",
        "Content management system (FAQs, help articles)",
        "Error monitoring (Sentry)",
        "Performance monitoring and alerting",
        "Audit logs and admin action tracking",
        "System logs page (error logs, admin trail)"
      ]
    },

    "phase_7_5": {
      "status": "NOT_STARTED",
      "duration": "Week 20-21",
      "title": "Multi-Currency Support",
      "goal": "Implement comprehensive multi-currency support across all modules with real-time exchange rates and admin-configurable currencies",
      "overview": {
        "description": "Add multi-currency functionality throughout the entire application, allowing users to set their preferred currency and work with multiple currencies across all financial data. Initial support for USD, EUR, and UAH with ability to add more currencies from admin panel.",
        "tier_access": "All tiers (Growth+ for multi-currency accounts as per original spec)",
        "default_currency": "USD",
        "supported_currencies_initial": ["USD", "EUR", "UAH"],
        "exchange_rate_provider": "Exchange Rate API (https://exchangerate-api.com/)",
        "conversion_strategy": "Real-time rates with 1-hour cache, fallback to last known rates"
      },
      "scope": {
        "affected_modules": [
          "Income Tracking - income sources and transactions in different currencies",
          "Expenses - transactions with currency support",
          "Savings - multi-currency accounts (Growth+ tier)",
          "Subscriptions - subscription costs in any currency",
          "Installments - loans in different currencies",
          "Goals - goal targets in user's preferred currency",
          "Portfolio - assets in different currencies",
          "Budgets - budget limits in user's currency",
          "Dashboard - all aggregated metrics with currency conversion",
          "Admin Panel - currency management interface"
        ],
        "user_preferences": "Users can set preferred currency in Settings (stored in user_preferences table)",
        "display_rules": "Always display amounts in user's preferred currency, with original currency shown in tooltips/details"
      },
      "tasks": {
        "database_schema": [
          "Create currencies table (code, name, symbol, decimal_places, is_active, created_by_admin)",
          "Create exchange_rates table (from_currency, to_currency, rate, fetched_at, source)",
          "Add currency columns to all financial tables (income_sources, expenses, savings_accounts, subscriptions, installments, goals, portfolio_assets, budgets)",
          "Add preferred_currency to user_preferences table (default: USD)",
          "Add display_currency to user_preferences (default: same as preferred_currency)",
          "Create Alembic migration for all currency-related schema changes",
          "Seed initial currencies (USD, EUR, UAH) with proper symbols and metadata",
          "Add indexes on currency columns for query performance"
        ],
        "backend_currency_service": [
          "Create currency service module (app/services/currency_service.py)",
          "Implement exchange rate fetching from Exchange Rate API",
          "Implement rate caching with Redis (1-hour TTL)",
          "Implement fallback to last known rate if API fails",
          "Create currency conversion functions (convert_amount, get_exchange_rate)",
          "Create batch conversion function (for dashboard aggregations)",
          "Implement rate refresh background task (Celery - hourly)",
          "Add error handling and retry logic for API failures",
          "Create currency formatting utility (format by locale and symbol)",
          "Implement historical rate storage (for accurate past conversions)"
        ],
        "backend_admin_currency_endpoints": [
          "Currency management endpoints (/api/v1/admin/currencies)",
          "List all currencies (GET /api/v1/admin/currencies)",
          "Add new currency (POST /api/v1/admin/currencies)",
          "Update currency (PUT /api/v1/admin/currencies/{code})",
          "Activate/deactivate currency (PATCH /api/v1/admin/currencies/{code}/status)",
          "Delete currency (DELETE /api/v1/admin/currencies/{code} - only if not in use)",
          "Exchange rate management (GET /api/v1/admin/exchange-rates)",
          "Manual rate override (POST /api/v1/admin/exchange-rates/override)",
          "Trigger rate refresh (POST /api/v1/admin/exchange-rates/refresh)",
          "Currency usage stats (GET /api/v1/admin/currencies/stats)"
        ],
        "backend_user_currency_endpoints": [
          "Get available currencies (GET /api/v1/currencies - returns active currencies only)",
          "Get current exchange rates (GET /api/v1/currencies/rates)",
          "Convert amount (POST /api/v1/currencies/convert - {amount, from, to})",
          "Batch convert (POST /api/v1/currencies/convert/batch)",
          "Update user preferred currency in preferences (already exists, enhance)",
          "Get currency by code (GET /api/v1/currencies/{code})"
        ],
        "backend_module_updates": [
          "Update Income module: add currency to IncomeSource model and schemas",
          "Update Income API: return amounts in user's preferred currency with conversion",
          "Update Expenses module: add currency to Expense model and schemas",
          "Update Expenses API: support currency in create/update, convert for display",
          "Update Savings module: add currency to SavingsAccount model (already partially done)",
          "Update Savings API: convert balances to user's currency for aggregations",
          "Update Subscriptions module: add currency to Subscription model",
          "Update Installments module: add currency to Installment model",
          "Update Goals module: add currency to Goal model",
          "Update Portfolio module: add currency to PortfolioAsset model (for non-USD stocks)",
          "Update Budgets module: add currency to Budget model",
          "Update Dashboard API: convert all aggregated metrics to user's preferred currency",
          "Update all stats endpoints: apply currency conversion before returning totals"
        ],
        "backend_migration_strategy": [
          "Create migration to add currency columns (default: USD for existing data)",
          "Backfill existing records with USD currency",
          "Create currencies seed data (USD, EUR, UAH)",
          "Fetch and store initial exchange rates",
          "Test migration on staging database",
          "Document rollback procedure"
        ],
        "frontend_currency_components": [
          "Create CurrencySelect component (dropdown with currency symbols and flags)",
          "Create CurrencyDisplay component (formats amount with proper symbol and locale)",
          "Create CurrencyInput component (numeric input with currency selector)",
          "Create ExchangeRateDisplay component (shows current rate between two currencies)",
          "Create CurrencyConverter component (quick convert tool)",
          "Create MultiCurrencyAmount component (shows amount in multiple currencies)",
          "Add currency icons/flags (use emoji flags or icon library)",
          "Create CurrencyBadge component (displays currency code with symbol)"
        ],
        "frontend_preferences_update": [
          "Add Currency section to Preferences tab in Settings",
          "Add 'Preferred Currency' selector (affects how data is stored by default)",
          "Add 'Display Currency' selector (affects how data is displayed)",
          "Add 'Show Original Currency' toggle (show source currency in tooltips)",
          "Add 'Auto-convert on display' toggle",
          "Update preferencesApi to handle currency preferences",
          "Add currency format preview in settings"
        ],
        "frontend_module_updates": [
          "Update Income forms: add currency selector to income source form",
          "Update Income display: show amounts in user's currency with conversion info",
          "Update Expenses forms: add currency selector to expense form",
          "Update Expenses display: show amounts with currency, add multi-currency filter",
          "Update Savings forms: add currency selector to account form",
          "Update Savings display: convert balances to display currency",
          "Update Subscriptions forms: add currency selector",
          "Update Installments forms: add currency selector",
          "Update Goals forms: add currency selector for target amount",
          "Update Portfolio: show asset values in user's currency",
          "Update Budgets forms: add currency selector",
          "Update Dashboard: display all metrics in user's currency with conversion tooltips"
        ],
        "frontend_admin_currency_ui": [
          "Create Currency Management page (/admin/currencies)",
          "Currency list table with code, name, symbol, status",
          "Add Currency dialog (code, name, symbol, decimal_places)",
          "Edit Currency dialog",
          "Activate/Deactivate currency toggle",
          "Delete currency with confirmation (only if unused)",
          "Exchange Rates page (/admin/exchange-rates)",
          "Rate list table with currency pairs and last update time",
          "Manual rate override dialog",
          "Refresh rates button",
          "Rate update history log",
          "Currency usage statistics (which currencies are most used)"
        ],
        "frontend_ux_enhancements": [
          "Add currency conversion tooltips (hover over amount to see original currency)",
          "Add 'View in original currency' toggle on detail pages",
          "Add multi-currency summary cards on dashboard",
          "Add exchange rate widget showing rates for user's common currencies",
          "Add currency trend charts (rate changes over time)",
          "Add 'as of [date/time]' for exchange rate displays",
          "Add warning icon when exchange rates are stale (>24 hours old)",
          "Add offline fallback message when rates can't be fetched"
        ],
        "api_types_and_validation": [
          "Define Currency type/interface (code, name, symbol, decimalPlaces, isActive)",
          "Define ExchangeRate type/interface (from, to, rate, fetchedAt)",
          "Define CurrencyAmount type/interface (amount, currency, displayAmount, displayCurrency)",
          "Update all API response types to include currency fields",
          "Add Zod schemas for currency validation in forms",
          "Add Pydantic schemas for currency validation in backend",
          "Ensure all currency codes follow ISO 4217 standard"
        ],
        "caching_and_performance": [
          "Cache exchange rates in Redis (1-hour TTL)",
          "Cache user's preferred currency in frontend (localStorage + React state)",
          "Batch currency conversions for dashboard (single API call)",
          "Pre-fetch exchange rates on app load",
          "Lazy load currency conversions for list views (convert on scroll)",
          "Add loading states for currency conversions",
          "Optimize database queries with currency filters"
        ],
        "testing": [
          "Backend unit tests for currency service",
          "Test exchange rate fetching and caching",
          "Test currency conversion accuracy",
          "Test API fallback when rate service is down",
          "Test all module APIs with different currencies",
          "Frontend component tests for currency components",
          "E2E test: Create income in EUR, view in USD",
          "E2E test: Change preferred currency and verify updates",
          "E2E test: Admin adds new currency",
          "Test tier restrictions (multi-currency accounts for Growth+)",
          "Test historical data with currency changes"
        ],
        "documentation": [
          "Document currency service architecture",
          "Document exchange rate update strategy",
          "Document admin guide for adding currencies",
          "Document user guide for currency preferences",
          "Document API currency parameters",
          "Document migration guide for existing users",
          "Add inline help tooltips explaining currency features"
        ],
        "edge_cases_and_validations": [
          "Handle currency change for existing data (keep original, convert on display)",
          "Validate currency exists before allowing selection",
          "Prevent deletion of currencies in use",
          "Handle exchange rate unavailability gracefully",
          "Validate amount precision based on currency decimal places",
          "Handle zero/negative amounts in conversions",
          "Prevent circular currency conversions",
          "Handle very large amounts (avoid overflow)",
          "Display warning when converting between cryptocurrencies (if added later)",
          "Handle rate refresh failures (retry logic)"
        ]
      },
      "deliverables": [
        "Complete multi-currency support across all 7 core modules",
        "Currency management interface in admin panel",
        "User currency preferences in Settings",
        "Real-time exchange rate integration with caching",
        "Currency conversion utility functions (frontend and backend)",
        "Reusable currency components (CurrencySelect, CurrencyDisplay, CurrencyInput)",
        "Database schema with currency support",
        "Exchange rates auto-refresh background job",
        "Initial currencies seeded (USD, EUR, UAH)",
        "All existing data migrated with USD as default",
        "Dashboard and stats endpoints with currency conversion",
        "Comprehensive testing (unit, integration, E2E)",
        "Documentation and user guides"
      ],
      "technical_highlights": {
        "backend": "Currency service with Exchange Rate API integration, Redis caching, Celery background refresh",
        "database": "Currency and exchange_rates tables, currency columns on all financial tables",
        "frontend": "Reusable currency components with proper TypeScript types, RTK Query for currency API",
        "conversion_strategy": "Store in original currency, convert on display to user's preferred currency",
        "caching": "1-hour Redis cache for rates, fallback to last known rate",
        "tier_check": "Multi-currency savings accounts limited to Growth+ tier",
        "admin_control": "Full currency CRUD from admin panel, manual rate overrides"
      },
      "migration_notes": [
        "All existing financial data will be set to USD currency by default",
        "Users' preferred_currency will be set to USD by default",
        "Exchange rates will be fetched and cached on first deployment",
        "No data loss - original amounts preserved with currency metadata",
        "Rollback plan: Remove currency columns, revert to single-currency mode"
      ],
      "future_enhancements": [
        "Support for cryptocurrency (BTC, ETH, etc.)",
        "Historical exchange rates for accurate past conversions",
        "Custom exchange rate providers (for cryptocurrencies)",
        "Multi-currency income/expense reports",
        "Currency hedging recommendations",
        "Automatic currency detection from bank statements",
        "Currency conversion fees tracking",
        "Forward/future rates for planning"
      ]
    },

    "phase_8": {
      "duration": "Week 22-23",
      "title": "User Experience & Polish",
      "goal": "Enhance UI/UX, add user customization, and optimize performance",
      "tasks": {
        "user_settings": [
          "Complete Settings page (/settings) with tabs",
          "Account tab: profile info editor (name, email, avatar upload)",
          "Subscription tab: current plan, usage stats, upgrade/cancel",
          "Appearance tab: theme selector (light/dark/system), font size, view density",
          "Preferences tab: currency (primary/secondary), date format, number format, start of week, fiscal year",
          "Security tab: change password, 2FA setup (prep for Phase 2), active sessions, login history",
          "Notifications tab: email notifications on/off, frequency (daily/weekly), push notifications (prep)",
          "Privacy tab: data sharing preferences, analytics opt-in/out, marketing emails",
          "Export Data tab: download all data (GDPR), export reports (PDF/Excel), scheduled exports",
          "Swipe Gestures tab: customize swipe actions per module (checkboxes)"
        ],
        "dashboard_customization": [
          "Drag & drop widget reordering (react-dnd or similar)",
          "Show/hide widgets (checkboxes in settings)",
          "Widget size adjustment (small/medium/large)",
          "Save custom layouts per user (store in DB)",
          "Reset to default button"
        ],
        "advanced_interactions": [
          "Implement swipe gestures on mobile/tablet (React Swipeable)",
          "User-configurable swipe actions (read from user preferences)",
          "Smooth animations with Framer Motion (page transitions, modal open/close)",
          "Loading state improvements (skeleton screens match actual layout)",
          "Optimistic UI updates (update UI immediately, rollback on error)",
          "Keyboard shortcuts (basic: Esc to close, Cmd+K for quick add - document in help)"
        ],
        "responsive_design": [
          "Mobile optimization for all modules (test on iPhone, Android)",
          "Tablet layout refinements (2-column layouts)",
          "Desktop layout refinements (3-4 column layouts)",
          "Test on various browsers (Chrome, Firefox, Safari, Edge)",
          "Fix any responsive issues"
        ],
        "onboarding": [
          "Welcome tour for new users (first login - interactive tooltips)",
          "Product tour (highlight key features)",
          "Quick setup wizard (add first income source, expense, account)",
          "Sample data option (generate demo data for testing)",
          "Skip tour option"
        ],
        "help_and_support": [
          "In-app help center (/help)",
          "Contextual help tooltips (? icons next to complex features)",
          "FAQ page (pull from admin-created content)",
          "Contact support form",
          "Feature request form",
          "Bug report form (with screenshot upload)"
        ],
        "performance_optimization": [
          "Code splitting optimization (lazy load routes)",
          "Image optimization (Next.js Image component)",
          "Bundle size reduction (analyze with webpack-bundle-analyzer)",
          "API response caching (RTK Query handles most, verify settings)",
          "Database query optimization (add indexes, use EXPLAIN ANALYZE)",
          "Lighthouse audit (target score > 90 for Performance, Accessibility, Best Practices, SEO)",
          "Fix Lighthouse issues"
        ],
        "accessibility": [
          "Add ARIA labels to all interactive elements",
          "Keyboard navigation (tab order, focus management)",
          "Screen reader testing (NVDA, VoiceOver)",
          "Color contrast compliance (WCAG AA minimum)",
          "Focus management (visible focus indicators)",
          "Alt text for all images"
        ]
      },
      "deliverables": [
        "Polished, professional UI/UX",
        "Fully responsive design (mobile/tablet/desktop)",
        "User customization features (dashboard, swipe gestures)",
        "Onboarding experience for new users",
        "Performance optimized (Lighthouse > 90)",
        "Accessibility compliant"
      ]
    },

    "phase_9": {
      "duration": "Week 23-24",
      "title": "AI Features & Insights",
      "goal": "Enhance AI capabilities with personalized recommendations and insights",
      "tasks": {
        "ai_powered_insights": [
          "Monthly financial health report generation (AI-generated summary)",
          "Spending anomaly detection (detect unusual spending patterns)",
          "Saving opportunities identification (AI suggests where to cut costs)",
          "Budget recommendations (AI suggests optimal budget based on history)",
          "Investment suggestions (basic - diversification, rebalancing)",
          "Goal recommendations (AI suggests goals based on financial situation)"
        ],
        "enhanced_categorization": [
          "Improve AI categorization accuracy (fine-tune prompts)",
          "Learn from user corrections (store corrections in DB, use in future prompts)",
          "Multi-language support prep (detect language, translate categories)",
          "Custom category suggestions (AI suggests new categories based on transactions)"
        ],
        "smart_notifications": [
          "Unusual spending alerts (spending 2x average in a category)",
          "Bill payment reminders (subscriptions, installments)",
          "Goal milestone celebrations (toast + email when goal reached)",
          "Savings opportunity alerts (You could save $50/mo by canceling X)",
          "Portfolio rebalancing suggestions (Your stocks are 80%, consider diversifying)"
        ],
        "predictive_analytics": [
          "Cash flow forecasting (predict next month's income/expenses based on history)",
          "Expense prediction (predict future expenses in each category)",
          "Savings rate projection (at current rate, you'll save $X by end of year)",
          "Goal completion date estimation (You'll reach your goal by June 2026 at current pace)",
          "Net worth trajectory (predict net worth growth over next 12 months)"
        ],
        "ai_insights_widget": [
          "Create AI Insights widget for dashboard",
          "Personalized tips (3-5 tips based on user's data)",
          "Action items (suggested actions to improve finances)",
          "Trend analysis (Your spending is up 15% this month vs last)",
          "Comparative insights (You spent $200 more on dining vs 3-month average)"
        ],
        "chatbot_optional": [
          "Basic financial Q&A chatbot (if time allows)",
          "Query your data with natural language (Show me dining expenses last month)",
          "Chat interface in dashboard",
          "Use Claude API for natural language understanding"
        ]
      },
      "deliverables": [
        "Advanced AI insights across platform",
        "Predictive analytics features",
        "Smart notification system",
        "Personalized recommendations (spending, saving, investing)",
        "Enhanced AI categorization with learning"
      ]
    },

    "phase_10": {
      "duration": "Week 25-26",
      "title": "Testing, Security & Compliance",
      "goal": "Comprehensive testing, security hardening, and legal compliance",
      "tasks": {
        "testing": [
          "Backend unit tests for all modules (pytest, target >80% coverage)",
          "Backend integration tests (test API endpoints end-to-end)",
          "Frontend component tests (Jest + React Testing Library)",
          "Frontend E2E tests (Playwright - test critical user flows)",
          "API contract tests (ensure frontend/backend contracts match)",
          "Load testing backend (use Locust or k6, simulate 100+ concurrent users)",
          "Security testing (OWASP Top 10 checks)",
          "Test tier restrictions (verify free users can't access premium features)",
          "Test payment flows (Stripe test mode)"
        ],
        "security": [
          "Security audit (manual review + automated tools)",
          "SQL injection prevention review (verify SQLAlchemy parameterizes queries)",
          "XSS prevention review (verify React escapes user input)",
          "CSRF protection (verify enabled in FastAPI)",
          "Rate limiting on API endpoints (especially auth, expensive operations)",
          "Input validation hardening (verify all inputs validated with Pydantic/Zod)",
          "Secrets management review (no secrets in code, use env vars)",
          "SSL/TLS configuration (HTTPS everywhere in production)",
          "Database encryption at rest (enable in PostgreSQL)",
          "Implement 2FA (optional, can be Phase 2)",
          "Content Security Policy (CSP) headers",
          "Security headers (X-Frame-Options, X-Content-Type-Options, etc.)"
        ],
        "compliance": [
          "GDPR compliance review and implementation",
          "Write Privacy Policy (clear, concise, compliant)",
          "Write Terms of Service",
          "Cookie consent banner (only if using non-essential cookies)",
          "Data export functionality (Settings → Export Data - already done)",
          "Data deletion functionality (delete account permanently)",
          "Consent management (track user consent for data processing)",
          "CCPA compliance (if targeting US - similar to GDPR)",
          "PCI DSS compliance review (Stripe handles most, verify we don't store card data)",
          "Data retention policy (define how long to keep user data)",
          "Security incident response plan (document steps if breach occurs)"
        ],
        "documentation": [
          "Complete API documentation (OpenAPI/Swagger from FastAPI)",
          "User guide (how to use each module, screenshots)",
          "Admin guide (how to use admin panel)",
          "Developer documentation (how to add new modules, architecture)",
          "Deployment guide (how to deploy to production)",
          "Disaster recovery plan (backup/restore procedures)"
        ],
        "bug_fixing": [
          "Fix all critical bugs (blocking user flows)",
          "Fix all high-priority bugs (major features broken)",
          "Address medium-priority bugs (nice-to-have fixes)",
          "Polish edge cases (what happens if user has 0 income sources, etc.)",
          "Test error handling (network errors, API errors, validation errors)"
        ]
      },
      "deliverables": [
        "Comprehensive test coverage (>80% backend, critical paths frontend)",
        "Security hardened (OWASP compliant, rate-limited, encrypted)",
        "GDPR/CCPA compliant (privacy policy, data export/delete)",
        "Complete documentation (API, user guide, admin guide)",
        "Critical bugs fixed"
      ]
    },

    "phase_11": {
      "duration": "Week 27-28",
      "title": "Launch Preparation & Marketing",
      "goal": "Beta testing, marketing materials, and public launch",
      "tasks": {
        "beta_testing": [
          "Invite beta testers (10-50 users, mix of technical and non-technical)",
          "Create beta signup form",
          "Onboard beta testers (send welcome email, setup guide)",
          "Collect feedback (surveys, interviews, analytics)",
          "Monitor beta usage (errors, engagement, drop-off points)",
          "Fix critical issues found during beta",
          "Gather testimonials from happy beta users"
        ],
        "marketing_site": [
          "Create public landing page (homepage - pitch the value)",
          "Features page (detail all modules and capabilities)",
          "Pricing page (public - /pricing)",
          "About page (mission, team, story)",
          "Blog setup (for launch post and future content)",
          "SEO optimization (meta tags, sitemap, structured data)",
          "Social media images (Open Graph, Twitter Cards)"
        ],
        "content_creation": [
          "Write launch blog post (What is Wealth Vault, why we built it)",
          "Create demo video (3-5 min walkthrough of key features)",
          "Take screenshots for marketing (hero shots, module screenshots)",
          "Prepare Product Hunt assets (logo, banner, screenshots, tagline)",
          "Write social media posts (Twitter, LinkedIn, Reddit)",
          "Create email templates (welcome email, feature announcement)",
          "Write press release (optional)"
        ],
        "production_setup": [
          "Production database setup (Railway/Supabase - paid tier, backups enabled)",
          "Production Redis setup (Upstash - paid tier)",
          "Production Celery workers (scale up for email sending)",
          "CDN setup for static assets (Vercel handles this)",
          "Backup strategy (automated daily backups, test restore)",
          "Uptime monitoring (UptimeRobot or similar)",
          "Domain setup (custom domain, DNS, SSL certificate)",
          "Production environment variables (switch to production API keys)"
        ],
        "legal": [
          "Privacy Policy finalized (reviewed by lawyer if possible)",
          "Terms of Service finalized",
          "Cookie Policy (if needed)",
          "GDPR consent flows (cookie banner, data processing consent)",
          "Refund policy (define refund terms for subscriptions)"
        ],
        "launch_checklist": [
          "All core features working (7 modules functional)",
          "No critical bugs (blocking user flows)",
          "Performance acceptable (Lighthouse > 90, <2s page load)",
          "Security reviewed (penetration test if budget allows)",
          "Customer support plan (email support, response time SLA)",
          "Incident response plan (what to do if site goes down)",
          "Backup/restore tested",
          "Stripe in production mode (live API keys)"
        ],
        "launch": [
          "Soft launch to small audience (friends, family, early supporters)",
          "Monitor for issues (errors, performance, user feedback)",
          "Fix any issues found",
          "Public launch announcement (blog, social media, email list)",
          "Product Hunt launch (prepare for day-of engagement)",
          "Post in relevant communities (Reddit, Hacker News, Indie Hackers)",
          "Email existing waitlist (if you have one)",
          "Monitor launch metrics (signups, activation, engagement)"
        ]
      },
      "deliverables": [
        "Beta tested and refined (10-50 users)",
        "Marketing materials ready (landing page, video, screenshots)",
        "Production environment stable and monitored",
        "Public launch complete 🚀",
        "Product Hunt launch",
        "Initial users onboarded"
      ]
    },
    
    "post_launch_phase_2": {
      "planned_features": [
        "Net Worth Module (aggregated view of all assets and liabilities, including real estate, vehicles, credit cards, mortgages)",
        "Reports Module (custom report builder, scheduled email reports, PDF/Excel exports, tax reports)",
        "Apple OAuth (alternative login method)",
        "Mobile App (React Native or PWA for offline access)",
        "Family Accounts (multi-user support, shared expenses, role-based permissions)",
        "Tax Center (tax document uploads, deduction tracking, tax-advantaged accounts, tax estimation)",
        "Bill Pay Integration (pay bills directly from app)",
        "Bank Account Integration (Plaid/Teller for automatic transaction sync)",
        "Investment Automation (auto-invest rules, dividend reinvestment)",
        "Charitable Giving Tracker (track donations, tax deductions)",
        "Business/Freelancer Features (invoicing, client management, expense tracking, profit/loss statements)"
      ],
      "deferred_features_from_phase_1": [
        "Analytics integration (PostHog/Plausible - user event tracking, conversion funnels, retention cohorts)",
        "Content management system (FAQs editor, help articles, announcement system)",
        "Error monitoring (Sentry integration with alerting)",
        "Performance monitoring (API response times, page load tracking)",
        "Advanced alerting (PagerDuty, Slack integration for critical errors)",
        "Audit logs and admin action tracking",
        "System logs page (error logs, admin activity trail)"
      ],
      "ongoing_tasks": [
        "User feedback implementation",
        "Feature requests from users",
        "Performance improvements",
        "Bug fixes",
        "Security updates",
        "AI model improvements (better categorization, more accurate predictions)",
        "Marketing and user acquisition",
        "Customer support"
      ]
    }
  },

  "coding_guidelines": {
    "general": [
      "Write clean, maintainable, well-documented code",
      "Follow module pattern - each module is self-contained",
      "Use TypeScript on frontend, type hints on backend",
      "Follow RESTful API conventions",
      "Write tests for new features",
      "Handle errors gracefully with user-friendly messages",
      "Optimize for performance (lazy loading, code splitting)",
      "Ensure responsive design (mobile-first)",
      "Add tier checks to all new features",
      "Use event bus for inter-module communication"
    ],
    "frontend": [
      "Use Next.js App Router (not Pages Router)",
      "Use 'use client' only when necessary (prefer server components)",
      "Use shadcn/ui components for UI elements",
      "Use Tailwind utility classes (no custom CSS unless absolutely needed)",
      "Use RTK Query for all API calls",
      "Use Zustand sparingly for UI state only",
      "Create reusable components in /components",
      "Follow consistent naming: PascalCase for components, camelCase for functions",
      "Use React Hook Form + Zod for forms",
      "Use Framer Motion for animations",
      "Always add loading and error states",
      "Implement empty states for all lists/tables",
      "CRITICAL: NO 'any' types allowed - always use proper TypeScript types",
      "CRITICAL: Code must have ZERO ESLint errors before committing",
      "CRITICAL: Code must have ZERO Prettier formatting issues",
      "CRITICAL: Code must have ZERO TypeScript errors",
      "Use strict TypeScript configuration (strict: true in tsconfig.json)",
      "Define proper interfaces/types for all props, state, and API responses",
      "Use generic types appropriately (Array<T>, Record<K, V>, etc.)",
      "Prefer 'unknown' over 'any' if type is truly unknown, then narrow with type guards",
      "Use 'as const' for literal types and readonly arrays/objects",
      "Export types/interfaces that may be reused across components"
    ],
    "backend": [
      "Use async/await for all database operations",
      "Use Pydantic schemas for request/response validation",
      "Follow FastAPI best practices (dependency injection, async routes)",
      "Add docstrings to all functions",
      "Use SQLAlchemy models for database interactions",
      "Create migrations with Alembic for schema changes",
      "Add permission decorators to all protected routes",
      "Return consistent API responses (success/error format)",
      "Use background tasks (Celery) for long-running operations",
      "Log important events and errors"
    ],
    "database": [
      "Use UUIDs for primary keys",
      "Add created_at and updated_at timestamps to all tables",
      "Create indexes on frequently queried fields",
      "Use foreign keys and constraints appropriately",
      "Normalize data but denormalize for performance when needed",
      "Use soft deletes where appropriate (deleted_at column)"
    ],
    "security": [
      "Never expose sensitive data in API responses",
      "Validate and sanitize all user inputs",
      "Use parameterized queries (SQLAlchemy ORM handles this)",
      "Implement rate limiting on authentication endpoints",
      "Store secrets in environment variables, never in code",
      "Use HTTPS everywhere in production",
      "Implement CORS properly"
    ],
    "code_quality_enforcement": {
      "frontend": {
        "linting": "Run 'npm run lint' before every commit - must pass with 0 errors and 0 warnings",
        "formatting": "Run 'npm run format' or use Prettier on save - code must be consistently formatted",
        "type_checking": "Run 'npm run type-check' (or 'tsc --noEmit') - must pass with 0 errors",
        "no_any_types": "NEVER use 'any' type - use proper types, generics, or 'unknown' with type guards",
        "strict_mode": "TypeScript strict mode must be enabled - all strictness flags should be true"
      },
      "pre_commit_checklist": [
        "✓ No ESLint errors or warnings",
        "✓ No Prettier formatting issues",
        "✓ No TypeScript errors",
        "✓ No 'any' types in the code",
        "✓ All functions and components properly typed",
        "✓ Props interfaces defined for all components",
        "✓ API response types defined"
      ]
    }
  },

  "creativity_guidelines": {
    "encouraged": [
      "Suggest improvements to UI/UX when you see opportunities",
      "Propose additional features that align with the module's purpose",
      "Recommend better chart types or visualizations for data",
      "Suggest performance optimizations",
      "Propose better error messages or user feedback",
      "Recommend accessibility improvements",
      "Suggest edge cases that should be handled",
      "Propose better naming for variables, functions, or components",
      "Recommend code refactoring when you see repetition or complexity",
      "Suggest additional tests or test cases",
      "Propose stricter type definitions when you see loose typing"
    ],
    "constraints": [
      "Stay within the defined tech stack (no random library additions without asking)",
      "Follow the modular architecture - don't create tight coupling between modules",
      "Respect tier-based access control - don't make premium features free",
      "Maintain design consistency - follow established UI patterns",
      "Don't deviate from the roadmap phases without explicit approval",
      "Keep mobile-first approach in mind",
      "Ensure all changes are testable and maintainable",
      "Never compromise on code quality - no 'any' types, no lint errors, no formatting issues"
    ],
    "communication": [
      "Explain your creative suggestions clearly",
      "Provide rationale for why a suggestion improves the codebase",
      "Flag potential issues or trade-offs with your suggestions",
      "Ask clarifying questions when requirements are ambiguous",
      "Suggest alternatives when you encounter blockers",
      "Document any non-obvious decisions in code comments"
    ]
  },

  "configuration_files": {
    "frontend": {
      "package.json": "Dependencies, scripts, project metadata",
      "next.config.js": "Next.js configuration",
      "tailwind.config.ts": "Tailwind CSS configuration with theme colors",
      "tsconfig.json": "TypeScript configuration (strict mode enabled)",
      ".eslintrc.json": "ESLint configuration (must pass with 0 errors)",
      ".prettierrc": "Prettier configuration for consistent formatting",
      ".env.local": "Environment variables (NEXTAUTH_URL, API_URL, etc.)",
      "middleware.ts": "Route protection and tier-based access"
    },
    "backend": {
      "requirements.txt": "Python dependencies",
      "pyproject.toml": "Python project configuration",
      "alembic.ini": "Alembic migration configuration",
      ".env": "Environment variables (DATABASE_URL, REDIS_URL, API keys)",
      "app/core/config.py": "Application settings and configuration"
    },
    "shared": {
      ".gitignore": "Files to ignore in version control",
      "README.md": "Project documentation",
      ".prettierrc": "Code formatting rules",
      ".eslintrc.json": "Linting rules"
    }
  },

  "important_notes": {
    "manual_review": "All changes will be manually reviewed before deployment. Feel free to be creative but ensure code quality.",
    "ask_when_unsure": "If a requirement is unclear or you need to make a significant architectural decision, ask for clarification rather than making assumptions.",
    "incremental_development": "Build features incrementally - start with basic functionality, then enhance. Don't try to make everything perfect in the first iteration.",
    "user_experience_first": "Always prioritize user experience. A feature that works but is confusing to use is not done.",
    "test_as_you_go": "Write tests alongside features, not as an afterthought.",
    "document_decisions": "Add comments explaining 'why' for non-obvious code decisions.",
    "zero_tolerance_for_any": "The 'any' type is forbidden. Proper typing is non-negotiable. If you're unsure of a type, use 'unknown' and narrow it with type guards.",
    "code_quality_is_mandatory": "Code must pass all linting, formatting, and type-checking before being considered complete. No exceptions."
  },

  "helpful_commands": {
    "frontend": {
      "dev": "cd frontend && npm run dev (starts Next.js on http://localhost:3000)",
      "build": "cd frontend && npm run build",
      "test": "cd frontend && npm test",
      "lint": "cd frontend && npm run lint (must pass with 0 errors)",
      "lint_fix": "cd frontend && npm run lint -- --fix",
      "format": "cd frontend && npm run format (Prettier)",
      "format_check": "cd frontend && npm run format:check",
      "type_check": "cd frontend && npm run type-check (or tsc --noEmit)"
    },
    "backend": {
      "dev": "cd backend && uvicorn app.main:app --reload (starts FastAPI on http://localhost:8000)",
      "migrate": "cd backend && alembic upgrade head",
      "new_migration": "cd backend && alembic revision --autogenerate -m 'description'",
      "test": "cd backend && pytest",
      "lint": "cd backend && ruff check .",
      "format": "cd backend && black ."
    },
    "database": {
      "psql": "psql postgresql://user:password@localhost:5432/wealthvault_dev",
      "reset": "Drop and recreate database (use carefully!)"
    }
  },

  "external_resources": {
    "documentation": {
      "nextjs": "https://nextjs.org/docs",
      "fastapi": "https://fastapi.tiangolo.com/",
      "shadcn": "https://ui.shadcn.com/",
      "tailwind": "https://tailwindcss.com/docs",
      "recharts": "https://recharts.org/",
      "sqlalchemy": "https://docs.sqlalchemy.org/",
      "stripe": "https://stripe.com/docs/api",
      "typescript": "https://www.typescriptlang.org/docs/"
    },
    "apis": {
      "anthropic": "https://docs.anthropic.com/",
      "openai": "https://platform.openai.com/docs",
      "exchange_rates": "https://exchangerate-api.com/docs",
      "yahoo_finance": "https://github.com/ranaroussi/yfinance"
    }
  },

  "success_criteria": {
    "phase_completion": "A phase is complete when all deliverables are functional, tested, and reviewed",
    "module_completion": "A module is complete when it has backend API, frontend UI, tests, tier checks, and documentation",
    "code_quality": "Code should be readable, maintainable, performant, and follow established patterns. Frontend code must have 0 lint/prettier/TypeScript errors and NO 'any' types.",
    "user_experience": "Features should be intuitive, responsive, accessible, and provide helpful feedback"
  }
}